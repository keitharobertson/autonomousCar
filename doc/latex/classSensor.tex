\hypertarget{classSensor}{\section{Sensor Class Reference}
\label{classSensor}\index{Sensor@{Sensor}}
}


\hyperlink{classSensor}{Sensor} class manages sensor tasks.  




{\ttfamily \#include $<$Sensor.\-h$>$}

Inheritance diagram for Sensor\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classSensor}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSensor_a342d6d11ef572c8cba92cb76fb1a294b}{Sensor} ()
\begin{DoxyCompactList}\small\item\em \hyperlink{classSensor}{Sensor} default constructor. \end{DoxyCompactList}\item 
\hyperlink{classSensor_aee8c70e7ef05ce65e7ee33686b5d7db2}{$\sim$\-Sensor} ()
\begin{DoxyCompactList}\small\item\em \hyperlink{classSensor}{Sensor} destructor. \end{DoxyCompactList}\item 
void \hyperlink{classSensor_a84bc35cfba92eb579bc311b3c8b2980d}{init} ()
\begin{DoxyCompactList}\small\item\em initializes the sensor \end{DoxyCompactList}\item 
void \hyperlink{classSensor_a2f08975182e98e644efb226435124047}{shutdown} ()
\begin{DoxyCompactList}\small\item\em shuts down the sensor \end{DoxyCompactList}\item 
virtual void $\ast$ \hyperlink{classSensor_acf4ff5c6c8f793ed47a8105b94ff7c3e}{read\-\_\-data} (int command)=0
\begin{DoxyCompactList}\small\item\em Reads in data from message to the sensor. \end{DoxyCompactList}\item 
virtual void \hyperlink{classSensor_a11b28f6bc91d6f69e734e13ab0e64f56}{init\-\_\-sensor} ()=0
\begin{DoxyCompactList}\small\item\em Virtual function to initialize the sensor device. \end{DoxyCompactList}\item 
virtual void \hyperlink{classSensor_ae4ec41b880d44feb898da5c62c3203c9}{collector} ()=0
\begin{DoxyCompactList}\small\item\em collects data from the sensor \end{DoxyCompactList}\item 
virtual void \hyperlink{classSensor_a595d8d9cd87dd3704fad2a313c709a7e}{analysis} ()=0
\begin{DoxyCompactList}\small\item\em Performs the analysis of the data collected from the sensor. \end{DoxyCompactList}\item 
virtual void \hyperlink{classSensor_a45533b253f81f85d1b6fcea902a5692b}{handle\-\_\-message} (\hyperlink{SUBSYS__COMMANDS_8h_ad814416fc1a8c675bea2687d96088a8f}{M\-E\-S\-S\-A\-G\-E} $\ast$message)=0
\begin{DoxyCompactList}\small\item\em Handles message sent to the subsystem. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
pthread\-\_\-t \hyperlink{classSensor_a881761631861338b335680ab1e618277}{t\-Collector}
\item 
pthread\-\_\-t \hyperlink{classSensor_afce21e3a689654c7d165f2a0e01ab86c}{t\-Analysis}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\hyperlink{classSensor}{Sensor} class manages sensor tasks. 

Sets up collector and analysis tasks on init and cancels tasks on shutdown 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classSensor_a342d6d11ef572c8cba92cb76fb1a294b}{\index{Sensor@{Sensor}!Sensor@{Sensor}}
\index{Sensor@{Sensor}!Sensor@{Sensor}}
\subsubsection[{Sensor}]{\setlength{\rightskip}{0pt plus 5cm}Sensor\-::\-Sensor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classSensor_a342d6d11ef572c8cba92cb76fb1a294b}


\hyperlink{classSensor}{Sensor} default constructor. 

does nothing \hypertarget{classSensor_aee8c70e7ef05ce65e7ee33686b5d7db2}{\index{Sensor@{Sensor}!$\sim$\-Sensor@{$\sim$\-Sensor}}
\index{$\sim$\-Sensor@{$\sim$\-Sensor}!Sensor@{Sensor}}
\subsubsection[{$\sim$\-Sensor}]{\setlength{\rightskip}{0pt plus 5cm}Sensor\-::$\sim$\-Sensor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classSensor_aee8c70e7ef05ce65e7ee33686b5d7db2}


\hyperlink{classSensor}{Sensor} destructor. 

shuts down the subsystem (cancels the collector and analysis tasks) 

\subsection{Member Function Documentation}
\hypertarget{classSensor_a595d8d9cd87dd3704fad2a313c709a7e}{\index{Sensor@{Sensor}!analysis@{analysis}}
\index{analysis@{analysis}!Sensor@{Sensor}}
\subsubsection[{analysis}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Sensor\-::analysis (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSensor_a595d8d9cd87dd3704fad2a313c709a7e}


Performs the analysis of the data collected from the sensor. 

Virtual function implemented at the specific sensor level. The analysis function executes in the analysis thread and is synced with the collector task by the collect\-\_\-analysis\-\_\-sync semaphore. Messages will be sent to the actuators using the system message queue. 

Implemented in \hyperlink{classGPS_a4dca50736c5e49f831515219536823b2}{G\-P\-S}, \hyperlink{classCompass_a4dd6402d0ece9203c6b92670265b4c8d}{Compass}, and \hyperlink{classSonar_a11a32c64528f8e69fdde4722f3b3bc7b}{Sonar}.

\hypertarget{classSensor_ae4ec41b880d44feb898da5c62c3203c9}{\index{Sensor@{Sensor}!collector@{collector}}
\index{collector@{collector}!Sensor@{Sensor}}
\subsubsection[{collector}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Sensor\-::collector (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSensor_ae4ec41b880d44feb898da5c62c3203c9}


collects data from the sensor 

Virtual function implemented at the specific sensor level. The collector function executes in the collector thread and executes indefinitely at a set frequency. It calls the data\-\_\-grab to do the actual communication with the hardware to provide a layer of abstraction between the software and specifics of the hardware. It can optionally average data prior to analysis if the system is expected to be under heavy load and the tasks are not schedulable with the typical release frequencies (averaging will have the effect that the analysis task will be released less frequently). 

Implemented in \hyperlink{classGPS_a17383568c4ed86a0adfdd5c88b6591d4}{G\-P\-S}, \hyperlink{classCompass_ae8d7f3417a27b1d18487b96ca07dd32b}{Compass}, and \hyperlink{classSonar_a38b0e409082be17e7098b2e471bab4a8}{Sonar}.

\hypertarget{classSensor_a45533b253f81f85d1b6fcea902a5692b}{\index{Sensor@{Sensor}!handle\-\_\-message@{handle\-\_\-message}}
\index{handle\-\_\-message@{handle\-\_\-message}!Sensor@{Sensor}}
\subsubsection[{handle\-\_\-message}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Sensor\-::handle\-\_\-message (
\begin{DoxyParamCaption}
\item[{{\bf M\-E\-S\-S\-A\-G\-E} $\ast$}]{message}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSensor_a45533b253f81f85d1b6fcea902a5692b}


Handles message sent to the subsystem. 

Virtual function defined at the specific subsystem level. Will handle the messages sent to the sensor from the system controller. Messages could be from command line interface or from another subsystem. 

Implements \hyperlink{classSubsystem_a6205bccfd4906044065d25d8ab1a7bfb}{Subsystem}.



Implemented in \hyperlink{classGPS_a803a498352e30044136502a9e036d380}{G\-P\-S}, \hyperlink{classCompass_a1fb0f64b335e8f1d4f27dc2067312b4a}{Compass}, and \hyperlink{classSonar_a5f9b0f57b5a05b03b0dcb5ab830592ff}{Sonar}.

\hypertarget{classSensor_a84bc35cfba92eb579bc311b3c8b2980d}{\index{Sensor@{Sensor}!init@{init}}
\index{init@{init}!Sensor@{Sensor}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void Sensor\-::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classSensor_a84bc35cfba92eb579bc311b3c8b2980d}


initializes the sensor 

starts the collector and anaysis tasks 

Implements \hyperlink{classSubsystem_a77a984e8a06bfebb924a6e7ba4f98363}{Subsystem}.

\hypertarget{classSensor_a11b28f6bc91d6f69e734e13ab0e64f56}{\index{Sensor@{Sensor}!init\-\_\-sensor@{init\-\_\-sensor}}
\index{init\-\_\-sensor@{init\-\_\-sensor}!Sensor@{Sensor}}
\subsubsection[{init\-\_\-sensor}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Sensor\-::init\-\_\-sensor (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSensor_a11b28f6bc91d6f69e734e13ab0e64f56}


Virtual function to initialize the sensor device. 

Implemented by each sensor, the init\-\_\-sensor function is responsible for setting the sensor up for data collection. For example in the case of the compass subsystem, the init\-\_\-device task will set up the i2c bus, initialize the system variables, and perform other tasks necessary before data can be collected from the compass. 

Implemented in \hyperlink{classGPS_aebb999362899800a7e372e873bb5b943}{G\-P\-S}, \hyperlink{classCompass_a5cc2b71700af542b5aafadea4820a476}{Compass}, and \hyperlink{classSonar_af91d04cbc441084ba608a49c2be88d5b}{Sonar}.

\hypertarget{classSensor_acf4ff5c6c8f793ed47a8105b94ff7c3e}{\index{Sensor@{Sensor}!read\-\_\-data@{read\-\_\-data}}
\index{read\-\_\-data@{read\-\_\-data}!Sensor@{Sensor}}
\subsubsection[{read\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}virtual void$\ast$ Sensor\-::read\-\_\-data (
\begin{DoxyParamCaption}
\item[{int}]{command}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSensor_acf4ff5c6c8f793ed47a8105b94ff7c3e}


Reads in data from message to the sensor. 

Virtual function implemented at the subsystem level. Will read data into appropriate data type and then cast to a void$\ast$ and return. The type of data received depends on the message command. For example if trying to set the motor pwm duty cycle, a three byte char$\ast$ is expected. This function will read the data in from standard in (using cin) into an appropriate datatype for the given command and will return the data to the system message handler for further processing. 

Implements \hyperlink{classSubsystem_a85307df3e46421814204f77929e893aa}{Subsystem}.



Implemented in \hyperlink{classGPS_aa04076536ee9f7e2679895c69b07ad58}{G\-P\-S}, \hyperlink{classCompass_ab55d084e2d643df0a1970f5868d0c5a8}{Compass}, and \hyperlink{classSonar_a54f55470741873f333ad8af8a98affc8}{Sonar}.

\hypertarget{classSensor_a2f08975182e98e644efb226435124047}{\index{Sensor@{Sensor}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!Sensor@{Sensor}}
\subsubsection[{shutdown}]{\setlength{\rightskip}{0pt plus 5cm}void Sensor\-::shutdown (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classSensor_a2f08975182e98e644efb226435124047}


shuts down the sensor 

cancels the collector and analysis tasks 

Implements \hyperlink{classSubsystem_a510e18f972a3d86d7a47432dafa1ce4c}{Subsystem}.



\subsection{Member Data Documentation}
\hypertarget{classSensor_afce21e3a689654c7d165f2a0e01ab86c}{\index{Sensor@{Sensor}!t\-Analysis@{t\-Analysis}}
\index{t\-Analysis@{t\-Analysis}!Sensor@{Sensor}}
\subsubsection[{t\-Analysis}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-t Sensor\-::t\-Analysis\hspace{0.3cm}{\ttfamily [protected]}}}\label{classSensor_afce21e3a689654c7d165f2a0e01ab86c}
analysis thread \hypertarget{classSensor_a881761631861338b335680ab1e618277}{\index{Sensor@{Sensor}!t\-Collector@{t\-Collector}}
\index{t\-Collector@{t\-Collector}!Sensor@{Sensor}}
\subsubsection[{t\-Collector}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-t Sensor\-::t\-Collector\hspace{0.3cm}{\ttfamily [protected]}}}\label{classSensor_a881761631861338b335680ab1e618277}
collector thread 

The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/home/keith/realtime/Sensor.\-h\item 
/home/keith/realtime/Sensor.\-cpp\end{DoxyCompactItemize}
