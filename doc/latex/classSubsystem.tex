\hypertarget{classSubsystem}{\section{Subsystem Class Reference}
\label{classSubsystem}\index{Subsystem@{Subsystem}}
}


The \hyperlink{classSubsystem}{Subsystem} class defines the basic properties shared by all subsystems.  




{\ttfamily \#include $<$Subsystem.\-h$>$}

Inheritance diagram for Subsystem\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classSubsystem}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSubsystem_abdec44abe9ddba76f65abb02f8f62992}{Subsystem} ()
\begin{DoxyCompactList}\small\item\em \hyperlink{classSubsystem}{Subsystem} default constructor. \end{DoxyCompactList}\item 
\hyperlink{classSubsystem_af6026d0c678986cf1626251bf38916fa}{$\sim$\-Subsystem} ()
\begin{DoxyCompactList}\small\item\em \hyperlink{classSubsystem}{Subsystem} destructor. \end{DoxyCompactList}\item 
virtual void \hyperlink{classSubsystem_a77a984e8a06bfebb924a6e7ba4f98363}{init} ()=0
\begin{DoxyCompactList}\small\item\em Initializes the subsystem tasks particular to that subsystem. \end{DoxyCompactList}\item 
void \hyperlink{classSubsystem_a2c33b82253ec4588067349e33247f504}{send\-\_\-sys\-\_\-message} (\hyperlink{SUBSYS__COMMANDS_8h_ad814416fc1a8c675bea2687d96088a8f}{M\-E\-S\-S\-A\-G\-E} $\ast$message)
\begin{DoxyCompactList}\small\item\em send message to system \end{DoxyCompactList}\item 
virtual void \hyperlink{classSubsystem_a510e18f972a3d86d7a47432dafa1ce4c}{shutdown} ()=0
\begin{DoxyCompactList}\small\item\em Shutdown subsystem. \end{DoxyCompactList}\item 
virtual void $\ast$ \hyperlink{classSubsystem_a85307df3e46421814204f77929e893aa}{read\-\_\-data} (int command)=0
\begin{DoxyCompactList}\small\item\em Reads in data from message to the actuator. \end{DoxyCompactList}\item 
virtual void \hyperlink{classSubsystem_a6205bccfd4906044065d25d8ab1a7bfb}{handle\-\_\-message} (\hyperlink{SUBSYS__COMMANDS_8h_ad814416fc1a8c675bea2687d96088a8f}{M\-E\-S\-S\-A\-G\-E} $\ast$message)=0
\begin{DoxyCompactList}\small\item\em Handles message sent to the subsystem. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\-::string \hyperlink{classSubsystem_a731ef7c72752c9fafba06225a21e77ba}{subsys\-\_\-name}
\item 
int \hyperlink{classSubsystem_af5095f64990120d1ff8e1e07c7c1ee77}{subsys\-\_\-num}
\item 
int \hyperlink{classSubsystem_a3c1751f0ac60254618dc22f1b75fbfda}{enabled}
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
struct mq\-\_\-attr \hyperlink{classSubsystem_abbb7a2f8cb57fa70eaf65c1b7c353e08}{attr}
\item 
mqd\-\_\-t \hyperlink{classSubsystem_a3ef2ff7ded6b1623fae096828d549369}{sys\-\_\-mq}
\item 
unsigned int \hyperlink{classSubsystem_a71c9d55e3baa41c75bbc54e9e4407bdd}{prio}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \hyperlink{classSubsystem}{Subsystem} class defines the basic properties shared by all subsystems. 

Includes message send (system and subsystem) functionality and subsytem receiver task. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classSubsystem_abdec44abe9ddba76f65abb02f8f62992}{\index{Subsystem@{Subsystem}!Subsystem@{Subsystem}}
\index{Subsystem@{Subsystem}!Subsystem@{Subsystem}}
\subsubsection[{Subsystem}]{\setlength{\rightskip}{0pt plus 5cm}Subsystem\-::\-Subsystem (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classSubsystem_abdec44abe9ddba76f65abb02f8f62992}


\hyperlink{classSubsystem}{Subsystem} default constructor. 

Initializes the subsystem variables and sets up the message queue for system communication. \hypertarget{classSubsystem_af6026d0c678986cf1626251bf38916fa}{\index{Subsystem@{Subsystem}!$\sim$\-Subsystem@{$\sim$\-Subsystem}}
\index{$\sim$\-Subsystem@{$\sim$\-Subsystem}!Subsystem@{Subsystem}}
\subsubsection[{$\sim$\-Subsystem}]{\setlength{\rightskip}{0pt plus 5cm}Subsystem\-::$\sim$\-Subsystem (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classSubsystem_af6026d0c678986cf1626251bf38916fa}


\hyperlink{classSubsystem}{Subsystem} destructor. 

closes the message queue 

\subsection{Member Function Documentation}
\hypertarget{classSubsystem_a6205bccfd4906044065d25d8ab1a7bfb}{\index{Subsystem@{Subsystem}!handle\-\_\-message@{handle\-\_\-message}}
\index{handle\-\_\-message@{handle\-\_\-message}!Subsystem@{Subsystem}}
\subsubsection[{handle\-\_\-message}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Subsystem\-::handle\-\_\-message (
\begin{DoxyParamCaption}
\item[{{\bf M\-E\-S\-S\-A\-G\-E} $\ast$}]{message}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSubsystem_a6205bccfd4906044065d25d8ab1a7bfb}


Handles message sent to the subsystem. 

Virtual function defined at the specific subsystem level. Will handle the messages sent to the \hyperlink{classSubsystem}{Subsystem} from the system controller. Messages could be from command line interface or from another subsystem. 

Implemented in \hyperlink{classActuator_a733c6782030e224bcef26161c77a4d96}{Actuator}, \hyperlink{classSensor_a45533b253f81f85d1b6fcea902a5692b}{Sensor}, \hyperlink{classCompass_a1fb0f64b335e8f1d4f27dc2067312b4a}{Compass}, \hyperlink{classGPS_a803a498352e30044136502a9e036d380}{G\-P\-S}, \hyperlink{classSonar_a5f9b0f57b5a05b03b0dcb5ab830592ff}{Sonar}, \hyperlink{classMotor_add07c258d9b239633a3882a07dc9e4de}{Motor}, and \hyperlink{classSteering_a29e46d1b87ecda7807452ad67005efe1}{Steering}.

\hypertarget{classSubsystem_a77a984e8a06bfebb924a6e7ba4f98363}{\index{Subsystem@{Subsystem}!init@{init}}
\index{init@{init}!Subsystem@{Subsystem}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Subsystem\-::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSubsystem_a77a984e8a06bfebb924a6e7ba4f98363}


Initializes the subsystem tasks particular to that subsystem. 

Virtual function to be defined at subsystem type level. 

Implemented in \hyperlink{classActuator_a0ab156ee6321eb413171e7a04ae4d1ca}{Actuator}, and \hyperlink{classSensor_a84bc35cfba92eb579bc311b3c8b2980d}{Sensor}.

\hypertarget{classSubsystem_a85307df3e46421814204f77929e893aa}{\index{Subsystem@{Subsystem}!read\-\_\-data@{read\-\_\-data}}
\index{read\-\_\-data@{read\-\_\-data}!Subsystem@{Subsystem}}
\subsubsection[{read\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}virtual void$\ast$ Subsystem\-::read\-\_\-data (
\begin{DoxyParamCaption}
\item[{int}]{command}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSubsystem_a85307df3e46421814204f77929e893aa}


Reads in data from message to the actuator. 

Virtual function implemented at the subsystem level. Will read data into appropriate data type and then cast to a void$\ast$ and return. The type of data received depends on the message command. For example if trying to set the motor pwm duty cycle, a three byte char$\ast$ is expected. This function will read the data in from standard in (using cin) into an appropriate datatype for the given command and will return the data to the system message handler for further processing. 

Implemented in \hyperlink{classCompass_ab55d084e2d643df0a1970f5868d0c5a8}{Compass}, \hyperlink{classActuator_a65fe83ffd7895f3ab028b87a62b3af1d}{Actuator}, \hyperlink{classGPS_aa04076536ee9f7e2679895c69b07ad58}{G\-P\-S}, \hyperlink{classSonar_a54f55470741873f333ad8af8a98affc8}{Sonar}, \hyperlink{classSensor_acf4ff5c6c8f793ed47a8105b94ff7c3e}{Sensor}, \hyperlink{classMotor_a1727e2d2dfd483c9c85824915a6aeeb8}{Motor}, and \hyperlink{classSteering_afda4f2951e5be114abf988a8e5943a96}{Steering}.

\hypertarget{classSubsystem_a2c33b82253ec4588067349e33247f504}{\index{Subsystem@{Subsystem}!send\-\_\-sys\-\_\-message@{send\-\_\-sys\-\_\-message}}
\index{send\-\_\-sys\-\_\-message@{send\-\_\-sys\-\_\-message}!Subsystem@{Subsystem}}
\subsubsection[{send\-\_\-sys\-\_\-message}]{\setlength{\rightskip}{0pt plus 5cm}void Subsystem\-::send\-\_\-sys\-\_\-message (
\begin{DoxyParamCaption}
\item[{{\bf M\-E\-S\-S\-A\-G\-E} $\ast$}]{message}
\end{DoxyParamCaption}
)}}\label{classSubsystem_a2c33b82253ec4588067349e33247f504}


send message to system 

sends a message to the system using system heap message queue. This is used to send inter-\/subsystem messages. The system processes the messages and delivers them to the appropriate subsystem. \hypertarget{classSubsystem_a510e18f972a3d86d7a47432dafa1ce4c}{\index{Subsystem@{Subsystem}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!Subsystem@{Subsystem}}
\subsubsection[{shutdown}]{\setlength{\rightskip}{0pt plus 5cm}virtual void Subsystem\-::shutdown (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [pure virtual]}}}\label{classSubsystem_a510e18f972a3d86d7a47432dafa1ce4c}


Shutdown subsystem. 

Virtual function to be defined at subsystem type level. Responsible for deleting all tasks and freeing any dynamic memory before subsystem is shut down. 

Implemented in \hyperlink{classActuator_abd625b1dfd7dd296e814751e821eae4b}{Actuator}, and \hyperlink{classSensor_a2f08975182e98e644efb226435124047}{Sensor}.



\subsection{Member Data Documentation}
\hypertarget{classSubsystem_abbb7a2f8cb57fa70eaf65c1b7c353e08}{\index{Subsystem@{Subsystem}!attr@{attr}}
\index{attr@{attr}!Subsystem@{Subsystem}}
\subsubsection[{attr}]{\setlength{\rightskip}{0pt plus 5cm}struct mq\-\_\-attr Subsystem\-::attr\hspace{0.3cm}{\ttfamily [protected]}}}\label{classSubsystem_abbb7a2f8cb57fa70eaf65c1b7c353e08}
Message queue attributes \hypertarget{classSubsystem_a3c1751f0ac60254618dc22f1b75fbfda}{\index{Subsystem@{Subsystem}!enabled@{enabled}}
\index{enabled@{enabled}!Subsystem@{Subsystem}}
\subsubsection[{enabled}]{\setlength{\rightskip}{0pt plus 5cm}int Subsystem\-::enabled}}\label{classSubsystem_a3c1751f0ac60254618dc22f1b75fbfda}
if subsystem is enabled (0=disabled, 1=enabled) \hypertarget{classSubsystem_a71c9d55e3baa41c75bbc54e9e4407bdd}{\index{Subsystem@{Subsystem}!prio@{prio}}
\index{prio@{prio}!Subsystem@{Subsystem}}
\subsubsection[{prio}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int Subsystem\-::prio\hspace{0.3cm}{\ttfamily [protected]}}}\label{classSubsystem_a71c9d55e3baa41c75bbc54e9e4407bdd}
message queue priority \hypertarget{classSubsystem_a731ef7c72752c9fafba06225a21e77ba}{\index{Subsystem@{Subsystem}!subsys\-\_\-name@{subsys\-\_\-name}}
\index{subsys\-\_\-name@{subsys\-\_\-name}!Subsystem@{Subsystem}}
\subsubsection[{subsys\-\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}std\-::string Subsystem\-::subsys\-\_\-name}}\label{classSubsystem_a731ef7c72752c9fafba06225a21e77ba}
\hyperlink{classSubsystem}{Subsystem} name \hypertarget{classSubsystem_af5095f64990120d1ff8e1e07c7c1ee77}{\index{Subsystem@{Subsystem}!subsys\-\_\-num@{subsys\-\_\-num}}
\index{subsys\-\_\-num@{subsys\-\_\-num}!Subsystem@{Subsystem}}
\subsubsection[{subsys\-\_\-num}]{\setlength{\rightskip}{0pt plus 5cm}int Subsystem\-::subsys\-\_\-num}}\label{classSubsystem_af5095f64990120d1ff8e1e07c7c1ee77}
\hyperlink{classSubsystem}{Subsystem} number (assigned in \hyperlink{SUBSYS__COMMANDS_8h}{S\-U\-B\-S\-Y\-S\-\_\-\-C\-O\-M\-M\-A\-N\-D\-S.\-h}) \hypertarget{classSubsystem_a3ef2ff7ded6b1623fae096828d549369}{\index{Subsystem@{Subsystem}!sys\-\_\-mq@{sys\-\_\-mq}}
\index{sys\-\_\-mq@{sys\-\_\-mq}!Subsystem@{Subsystem}}
\subsubsection[{sys\-\_\-mq}]{\setlength{\rightskip}{0pt plus 5cm}mqd\-\_\-t Subsystem\-::sys\-\_\-mq\hspace{0.3cm}{\ttfamily [protected]}}}\label{classSubsystem_a3ef2ff7ded6b1623fae096828d549369}
message queue descriptor 

The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/home/keith/realtime/Subsystem.\-h\item 
/home/keith/realtime/Subsystem.\-cpp\end{DoxyCompactItemize}
